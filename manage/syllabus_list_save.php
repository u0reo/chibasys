<?php
const depart = [
  "G1" => "普遍教育",
  "L1" => "文学部",
  "E1" => "教育学部",
  "A1" => "法経学部",
  "B1" => "法政経学部",
  "S1" => "理学部",
  "S11" => "数学・情報数理学科",
  "S12" => "物理学科",
  "S13" => "化学科",
  "S14" => "生物学科",
  "S15" => "地球科学科",
  "S18" => "先進科学プログラム",
  "M1" => "医学部",
  "M11" => "医学科",
  "P1" => "薬学部",
  "P13" => "薬学科",
  "P14" => "薬科学科",
  "N1" => "看護学部",
  "N11" => "看護学科",
  "T1" => "工学部",
  "T1V" => "総合工学科",
  "T1V1" => "建築学コース",
  "T1V2" => "都市環境システムコース",
  "T1V3" => "デザインコース",
  "T1V4" => "機械工学コース",
  "T1V5" => "医工学コース",
  "T1V6" => "電気電子工学コース",
  "T1V7" => "物質科学コース",
  "T1V8" => "共生応用化学コース",
  "T1V9" => "情報工学コース",
  "T1E" => "都市環境システム学科",
  "T1K" => "先進科学プログラム",
  "T1K2" => "工学部先進科学プログラム(フロンティア)",
  "T1L" => "メディカルシステム工学科",
  "T1M" => "共生応用化学科Aコース",
  "T1N" => "建築学科",
  "T1P" => "デザイン学科",
  "T1Q" => "機械工学科",
  "T1R" => "電気電子工学科",
  "T1S" => "ナノサイエンス学科",
  "T1T" => "画像科学科",
  "T1U" => "情報画像学科",
  "T1F" => "デザイン工学科Aコース",
  "T1F4" => "建築コース",
  "H1" => "園芸学部",
  "Z1" => "国際教養学部",
  "Z11" => "国際教養学科",
  "E2" => "教育学研究科",
  "E21" => "学校教育専攻",
  "E215" => "学校心理学コース",
  "E216" => "発達教育科学コース",
  "E22" => "国語教育専攻",
  "E23" => "社会科教育専攻",
  "E24" => "数学教育専攻",
  "E25" => "理科教育専攻",
  "E26" => "音楽教育専攻",
  "E27" => "美術教育専攻",
  "E28" => "保健体育専攻",
  "E2A" => "家政教育専攻",
  "E2B" => "英語教育専攻",
  "E2C" => "養護教育専攻",
  "E2D" => "学校教育臨床専攻",
  "E2E" => "カリキュラム開発専攻",
  "E2F" => "特別支援専攻",
  "E2G" => "スクールマネジメント専攻",
  "E2H" => "学校教育科学専攻",
  "E2H1" => "教育発達支援系",
  "E2H2" => "教育開発臨床系",
  "E2I" => "教科教育科学専攻",
  "E2I1" => "言語・社会系",
  "E2I2" => "理数・技術系",
  "E2I3" => "芸術・体育系",
  "S2" => "理学研究科",
  "S21" => "基盤理学専攻",
  "S211" => "数学・情報数理学コース",
  "S212" => "物理学コース",
  "S213" => "化学コース",
  "S22" => "地球生命圏科学専攻",
  "S221" => "生物学コース",
  "S222" => "地球科学コース",
  "S23" => "基盤理学専攻",
  "S231" => "数学・情報数理学コース",
  "S232" => "物理学コース",
  "S233" => "化学コース",
  "S24" => "地球生命圏科学専攻",
  "S241" => "生物学コース",
  "S242" => "地球科学コース",
  "N2" => "看護学研究科",
  "N21" => "看護学専攻",
  "N265" => "国際プログラム(訪問)",
  "N266" => "国際プログラム(看護管理)",
  "N267" => "国際プログラム(看護病態)",
  "T2" => "工学研究科",
  "T21" => "建築・都市科学専攻",
  "T211" => "建築学コース",
  "T212" => "都市環境システムコース",
  "T22" => "デザイン科学専攻",
  "T221" => "デザイン科学コース",
  "T23" => "人工システム科学専攻",
  "T231" => "機械系コース",
  "T232" => "電気電子系コース",
  "T233" => "メディカルシステムコース",
  "T24" => "共生応用化学専攻",
  "T241" => "共生応用化学コース",
  "T25" => "建築・都市科学専攻",
  "T251" => "建築学コース",
  "T252" => "都市環境システムコース",
  "T26" => "デザイン科学専攻",
  "T261" => "デザイン科学コース",
  "T27" => "人工システム科学専攻",
  "T271" => "機械系コース",
  "T272" => "電気電子系コース",
  "T273" => "メディカルシステムコース",
  "T28" => "共生応用化学専攻",
  "T281" => "共生応用化学コース",
  "H2" => "園芸学研究科",
  "I2" => "人文社会科学研究科",
  "I21" => "地域文化形成専攻",
  "I213" => "言語行動",
  "I22" => "公共研究専攻",
  "I221" => "公共思想制度研究",
  "I222" => "共生社会基盤研究",
  "I23" => "社会科学研究専攻",
  "I232" => "経済理論・政策学(経",
  "I233" => "経済理論・政策学(金",
  "I24" => "総合文化研究専攻",
  "I241" => "言語構造",
  "I243" => "人間行動",
  "I25" => "先端経営科学専攻",
  "I26" => "公共研究専攻",
  "I261" => "公共哲学",
  "I27" => "社会科学研究専攻",
  "I28" => "文化科学研究専攻",
  "I281" => "比較言語文化",
  "Y2" => "融合科学研究科",
  "Y21" => "ナノサイエンス専攻",
  "Y211" => "ナノ物性コース",
  "Y212" => "ナノバイオロジーコー",
  "Y22" => "情報科学専攻",
  "Y221" => "画像マテリアルコース",
  "Y222" => "知能情報コース(前期",
  "Y23" => "ナノサイエンス専攻",
  "Y231" => "ナノ物性コース(後期",
  "Y232" => "ナノバイオロジーコー",
  "Y24" => "情報科学専攻",
  "Y241" => "画像マテリアル 後期",
  "Y242" => "知能情報コース",
  "J2" => "医学薬学府",
  "J21" => "総合薬品科学専攻",
  "J22" => "医療薬学専攻",
  "J23" => "環境健康科学専攻",
  "J231" => "医学領域",
  "J232" => "薬学領域",
  "J24" => "先進医療科学専攻",
  "J241" => "医学領域",
  "J242" => "薬学領域",
  "J25" => "先端生命科学専攻",
  "J251" => "医学領域",
  "J252" => "薬学領域",
  "J26" => "創薬生命科学専攻",
  "J27" => "医科学専攻",
  "J28" => "先端医学薬学専攻",
  "J281" => "先端生命(医学)",
  "J282" => "先端生命(薬学)",
  "J283" => "免疫統御(医学)",
  "J284" => "免疫統御(薬学)",
  "J285" => "先端臨床(医学)",
  "J286" => "先端臨床(薬学)",
  "J287" => "がん先端(医学)",
  "J288" => "がん先端(薬学)",
  "J29" => "先端創薬科学専攻",
  "J2A" => "先進予防医学共同専攻",
  "K2" => "専門法務研究科",
  "W2" => "融合理工学府",
  "W20" => "数学情報科学専攻",
  "W201" => "数学・情報数理学コース",
  "W202" => "情報科学コース",
  "W21" => "地球環境科学専攻",
  "W211" => "地球科学コース",
  "W212" => "リモートセンシングコース",
  "W213" => "都市環境システムコース",
  "W22" => "先進理化学専攻",
  "W221" => "物理学コース",
  "W222" => "物質科学コース",
  "W223" => "化学コース",
  "W224" => "共生応用化学コース",
  "W225" => "生物学コース",
  "W23" => "創成工学専攻",
  "W231" => "建築学コース",
  "W232" => "イメージング科学コース",
  "W233" => "デザインコース",
  "W24" => "基幹工学専攻",
  "W241" => "機械工学コース",
  "W242" => "医工学コース",
  "W243" => "電気電子工学コース",
  "W25" => "数学情報科学専攻",
  "W251" => "数学・情報数理学コース",
  "W252" => "情報科学コース",
  "W26" => "地球環境科学専攻",
  "W261" => "地球科学コース",
  "W262" => "リモートセンシングコース",
  "W263" => "都市環境システムコース",
  "W27" => "先進理化学専攻",
  "W271" => "物理学コース",
  "W272" => "物質科学コース",
  "W273" => "化学コース",
  "W274" => "共生応用化学コース",
  "W275" => "生物学コース",
  "W28" => "創成工学専攻",
  "W281" => "建築学コース",
  "W282" => "イメージング科学コース",
  "W283" => "デザインコース",
  "W29" => "基幹工学専攻",
  "W291" => "機械工学コース",
  "W292" => "医工学コース",
  "W293" => "電気電子工学コース",
  "D2" => "人文公共学府",
  "D21" => "人文科学専攻",
  "D22" => "公共社会科学専攻",
  "D23" => "人文公共学専攻",
  "H3" => "園芸学部園芸別科",
  "C1" => "留学生",
  "G2" => "大学院共通教育",
];
//count:223
require_once(__DIR__.'/../core.php');
init(true);
for ($i = 222; $i >= 0; $i--) {
  set_time_limit(0);
  $jsc = array_keys(depart)[$i];
  $result = portal_real_search_save([ 'nendo'=>2019, 'jikanwariShozokuCode'=>$jsc,
  'department'=>depart[substr($jsc, 0, 2)],
  'subject'=>(strlen($jsc) >= 3 ? depart[substr($jsc, 0, 3)] : null),
  'course'=>(strlen($jsc) >= 4 ? depart[substr($jsc, 0, 4)] : null) ]);
  echo("[$i]$jsc:$result[count]\n");
}
finalize();

/*$index = intval($_GET['index']);
$jsc = array_keys(depart)[$index];
require_once($_SERVER['DOCUMENT_ROOT'] . '/core.php');
set_time_limit(300);
$link = mysqli_connect();
$curl = curl_init();
var_dump(search_and_save($link, $curl, [ 'nendo'=>2019, 'jikanwariShozokuCode'=>$jsc,
  'department'=>depart[substr($jsc, 0, 2)],
  'subject'=>(strlen($jsc) >= 3 ? depart[substr($jsc, 0, 3)] : null),
  'course'=>(strlen($jsc) >= 4 ? depart[substr($jsc, 0, 4)] : null) ]));
mysqli_close($link);
curl_close($curl);

if ($index <= 0) exit;
echo('<html><head><meta http-equiv="refresh" content="1;URL=syllabus_list_save?index='.($index - 1).'"></head>');
echo('<body><h1>キャッシュ成功！ インデックス: '.($_GET['index'] + 1).'/223</h1>');
echo('<h2>1秒後に一つ前のインデックスに遷移します...</h2></body></html>');*/
?>